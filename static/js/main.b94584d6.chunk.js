(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{192:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(40),i=n.n(o),r=(n(87),n(10)),s=n(3),l=function(e){return e.currentUser},u=n(0),d=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,c=e.onCardDelete,o=Object(s.c)(l).user,i=t.owner._id===o._id,r="element__button-delete ".concat(i?"":"card__delete-button_hidden"),d=t.likes.some((function(e){return e._id===o._id})),p="element__like ".concat(d?"element__like_active":"");return Object(u.jsxs)("li",{className:"element",children:[Object(u.jsx)("button",{type:"button",className:r,onClick:function(){c(t)}}),Object(u.jsx)("img",{src:t.link,alt:t.name,onClick:function(){return n(t)},className:"element__image"}),Object(u.jsxs)("div",{className:"element__group",children:[Object(u.jsx)("h2",{className:"element__title",children:t.name}),Object(u.jsxs)("div",{className:"element__like-group",children:[Object(u.jsx)("button",{type:"button",className:p,onClick:function(){a(t)}}),Object(u.jsx)("span",{className:"element__like-counter",children:t.likes.length})]})]})]})},p=function(){return Object(u.jsx)("div",{style:{height:"71vh"},children:Object(u.jsx)("div",{className:"Spinner"})})},j="SET_CARDS",b="ADD_CARD",h="DELETE_CARD",O="LIKE_CARD",m="SET_USER",f="SET_EDIT_PROFILE_POPUP_OPEN",_="SET_ADD_PLACE_POPUP_OPEN",g="SET_EDIT_AVATAR_POPUP_OPEN",x="SET_POPUP_WITH_SUBMIT_OPEN",v="CLOSE_ALL_POPUPS",y="SET_LOADING",k="SET_SELECTED_CARD",N="SET_CARD_TO_DELETE",P="SET_LOADING_BTN",C="SET_LOGGED_IN",T="SET_CURRENT_EMAIL",S="SET_SUCCESS_POPUP_OPEN",L="SET_FAIL_POPUP_OPEN",E=function(e){return{type:k,payload:e}},U=function(e){return e.initialCards},A=function(e){var t=e.onCardLike,n=e.onCardDelete,a=Object(s.c)(U),c=a.cards,o=a.isLoading,i=Object(s.c)(l).user,r=Object(s.b)();function j(e){r(E(e))}return Object(u.jsx)("main",{className:"main",children:o?Object(u.jsx)(p,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsxs)("div",{className:"profile__wrapper",children:[Object(u.jsxs)("div",{className:"profile__image-wrapper",children:[Object(u.jsx)("img",{onClick:function(){r({type:g,payload:!0})},src:i.avatar,alt:"\u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__image"}),Object(u.jsx)("button",{className:"profile__image-btn"})]}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsx)("h1",{className:"profile__name",children:i.name}),Object(u.jsx)("button",{onClick:function(){r({type:f,payload:!0})},type:"button",className:"profile__button"}),Object(u.jsx)("p",{className:"profile__job",children:i.about})]})]}),Object(u.jsx)("button",{onClick:function(){r({type:_,payload:!0})},type:"button",className:"profile__button-add"})]}),Object(u.jsx)("section",{className:"elements",children:Object(u.jsx)("ul",{className:"elements__list",children:c.map((function(e){return Object(u.jsx)(d,{card:e,onCardClick:j,onCardLike:t,onCardDelete:n},e._id)}))})})]})})},R=n(78),w=n.n(R),D=function(){var e=w()().format("YYYY");return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})},I=function(e){var t=e.card,n=e.onClose;return Object(u.jsx)("div",{className:"popup popup_type_image ".concat(t&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(u.jsx)("button",{onClick:n,type:"button",className:"popup__button-close popup__button-close_type_image"}),Object(u.jsx)("img",{src:null===t||void 0===t?void 0:t.link,alt:null===t||void 0===t?void 0:t.name,className:"popup__img"}),Object(u.jsx)("h2",{className:"popup__title",children:null===t||void 0===t?void 0:t.name})]})})},B=n(2),q=function(e){return Object(u.jsx)("div",{className:"popup popup_".concat(e.params.name," ").concat(e.isOpen&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__button-close"}),Object(u.jsxs)("form",{onSubmit:e.onSubmit,action:"#",className:"form",name:e.params.formName,children:[Object(u.jsx)("h2",{className:"form__heading",children:e.params.title}),e.children,Object(u.jsx)("button",{type:"submit",className:"form__button ".concat(!e.isValid&&"form__button_disabled"),children:e.loadingBtn?e.params.buttonLoadingText:e.params.buttonText})]})]})})},F=function(e){return e.popups},z=function(e){return e.cardSettings},V=n(13),J=n(18),K=n(11),G=function(e){return e.langReducer},M={ru:{header:{singOut:"\u0412\u044b\u0439\u0442\u0438",singIn:"\u0412\u043e\u0439\u0442\u0438",singUp:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},addPlacePopup:{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",buttonLoadingText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c...",placeholderName:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholderLink:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"},editAvatarPopup:{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonLoadingText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c...",placeholderLink:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"},editProfilePopup:{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonLoadingText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c...",placeholderName:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",placeholderLink:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u044f"},login:{title:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},register:{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",textBtn:"\u0412\u043e\u0439\u0442\u0438"}},fi:{header:{singOut:"Kirjaudu ulos",singIn:"Luo tunnus",singUp:"Kirjaudu sis\xe4\xe4n"},addPlacePopup:{title:"Uusi paikka",buttonText:"Luoda",buttonLoadingText:"Luoda...",placeholderName:"Nimi",placeholderLink:"Linkki"},editAvatarPopup:{title:"P\xe4ivit\xe4 avatar",buttonText:"Luoda",buttonLoadingText:"Luoda...",placeholderLink:"Linkki"},editProfilePopup:{title:"Muokata profiili",buttonText:"Luoda",buttonLoadingText:"Luoda...",placeholderName:"Kirjoita nimisi",placeholderLink:"Kirjoita ammattisi"},login:{title:"Luo tunnus",buttonText:"Luo",placeholder:"Salasana"},register:{title:"Kirjaudu sis\xe4\xe4n",buttonText:"Kirjaudu",placeholder:"Salasana",text:"Oletko jo kirjautunut?",textBtn:"Luo tunnus"}}},W=function(e){var t,n,c=Object(s.c)(G).selectedLang,o=K.a().shape({userName:K.b().min(2,"".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"v\xe4hent\xe4\xe4n 2 merkki\xe4":"")).required("".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"Pakollinen kentt\xe4":"")),description:K.b().min(2,"".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"v\xe4hent\xe4\xe4n 2 merkki\xe4":"")).required("".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"Pakollinen kentt\xe4":""))}),i=Object(V.d)({resolver:Object(J.a)(o),mode:"onChange"}),r=i.register,d=i.formState.errors,p=i.handleSubmit,j=i.setValue,b=Object(s.c)(l).user,h=Object(s.c)(F).isEditProfilePopupOpen,O=Object(s.c)(z).loadingBtn;Object(a.useEffect)((function(){j("userName",b.name),j("description",b.about)}),[b,j,h]);var m=p((function(t){e.onUpdateUser({userName:t.userName,description:t.description})}));return Object(u.jsxs)(q,{isOpen:h,params:{name:"type_edit",title:"".concat(M[c].editProfilePopup.title),buttonText:"".concat(M[c].editProfilePopup.buttonText),buttonLoadingText:"".concat(M[c].editProfilePopup.buttonLoadingText),formName:"edit-profile"},onClose:e.onClose,loadingBtn:O,isValid:!0,onSubmit:m,children:[Object(u.jsx)("input",Object(B.a)(Object(B.a)({className:"form__input",type:"text",id:"name"},r("userName",{required:!0})),{},{placeholder:M[c].editProfilePopup.placeholderName})),Object(u.jsx)("p",{className:"form__input-error name-input-error",children:null===(t=d.userName)||void 0===t?void 0:t.message}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"text",className:"form__input",id:"description"},r("description",{required:!0})),{},{placeholder:M[c].editProfilePopup.placeholderLink})),Object(u.jsx)("p",{className:"form__input-error job-input-error",children:null===(n=d.description)||void 0===n?void 0:n.message})]})},Y=function(e){var t,n=Object(s.c)(G).selectedLang,c=K.a().shape({avatar:K.b().url("".concat("ru"===n?"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 URL":"","\n            ").concat("fi"===n?"Sy\xf6t\xe4 kelvollinen URL":"")).required("".concat("ru"===n?"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL":"","\n            ").concat("fi"===n?"Pakollinen kentt\xe4":""))}),o=Object(V.d)({resolver:Object(J.a)(c),mode:"onChange"}),i=o.register,r=o.formState,l=r.errors,d=r.isValid,p=o.handleSubmit,j=o.reset,b=Object(s.c)(F).isEditAvatarPopupOpen,h=Object(s.c)(z).loadingBtn;Object(a.useEffect)((function(){j()}),[j,b]);var O=p((function(t){e.onUpdateAvatar({avatar:t.avatar})}));return Object(u.jsxs)(q,{isOpen:b,onClose:e.onClose,loadingBtn:h,onSubmit:O,isValid:d,params:{name:"type_avatar",title:"".concat(M[n].editAvatarPopup.title),buttonText:"".concat(M[n].editAvatarPopup.buttonText),buttonLoadingText:"".concat(M[n].editAvatarPopup.buttonLoadingText),formName:"change-avatar"},children:[Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"url",className:"form__input",id:"avatar"},i("avatar",{required:!0})),{},{placeholder:M[n].editAvatarPopup.placeholderLink})),Object(u.jsx)("p",{className:"form__input-error avatar-input-error",children:null===(t=l.avatar)||void 0===t?void 0:t.message})]})},H=function(e){var t,n,c=Object(s.c)(G).selectedLang,o=K.a().shape({title:K.b().min(2,"".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"v\xe4hent\xe4\xe4n 2 merkki\xe4":"")).required("".concat("ru"===c?"\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":"","\n            ").concat("fi"===c?"Pakollinen kentt\xe4":"")),link:K.b().url("".concat("ru"===c?"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 URL":"","\n            ").concat("fi"===c?"Sy\xf6t\xe4 kelvollinen URL":"")).required("".concat("ru"===c?"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL":"","\n            ").concat("fi"===c?"Pakollinen kentt\xe4":""))}),i=Object(V.d)({resolver:Object(J.a)(o),mode:"onChange"}),r=i.register,l=i.formState,d=l.errors,p=l.isValid,j=i.handleSubmit,b=i.reset,h=Object(s.c)(z).loadingBtn,O=Object(s.c)(F).isAddPlacePopupOpen;Object(a.useEffect)((function(){b()}),[b,O]);var m=j((function(t){e.onAddPlace({title:t.title,link:t.link})}));return Object(u.jsxs)(q,{isOpen:O,params:{name:"new-card",title:"".concat(M[c].addPlacePopup.title),buttonText:"".concat(M[c].addPlacePopup.buttonText),buttonLoadingText:"".concat(M[c].addPlacePopup.buttonLoadingText),formName:"new-card"},onClose:e.onClose,onSubmit:m,isValid:p,loadingBtn:h,children:[Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"text"},r("title",{required:!0})),{},{className:"form__input",id:"title",placeholder:M[c].addPlacePopup.placeholderName})),Object(u.jsx)("p",{className:"title-input-error form__input-error",children:null===(t=d.title)||void 0===t?void 0:t.message}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"url",className:"form__input"},r("link",{required:!0})),{},{name:"link",id:"link",placeholder:M[c].addPlacePopup.placeholderLink})),Object(u.jsx)("p",{className:"link-input-error form__input-error",children:null===(n=d.link)||void 0===n?void 0:n.message})]})},X=function(e){var t=e.onSubmit,n=e.onClose,a=e.cardToDelete,c=Object(s.c)(F).isPopupWithSubmitOpen,o=Object(s.c)(z).loadingBtn;return Object(u.jsx)(q,{isOpen:c,params:{name:"type_confirmation",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",buttonLoadingText:"...",formName:"type_confirmation"},onClose:n,isValid:!0,loadingBtn:o,onSubmit:function(e){e.preventDefault(),t(a)}})},Q=n(9),Z=function(e){var t,n,c=e.handleAuthorize,o=Object(s.c)(G).selectedLang,i=K.a().shape({Email:K.b().email("".concat("ru"===o?"\u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b @":"","\n            ").concat("fi"===o?"Sy\xf6t\xe4 kelvollinen s\xe4hk\xf6postiosoite. Esim. erkki@tunnus.fi":"")).required("".concat("ru"===o?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b":"","\n            ").concat("fi"===o?"Pakollinen kentt\xe4":"")),password:K.b().min(8,"".concat("ru"===o?"\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 8 \u0434\u043e 32 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"","\n            ").concat("fi"===o?"v\xe4hent\xe4\xe4n 8 merkki\xe4":"")).max(32,"".concat("ru"===o?"\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 8 \u0434\u043e 32 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"","\n            ").concat("fi"===o?"enint\xe4\xe4n 32 merkki\xe4":"")).required("".concat("ru"===o?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b":"","\n            ").concat("fi"===o?"Pakollinen kentt\xe4":""))}),l=Object(V.d)({resolver:Object(J.a)(i),mode:"onChange"}),d=l.register,p=l.formState.errors,j=l.handleSubmit,b=Object(a.useState)(""),h=Object(r.a)(b,2),O=h[0],m=h[1],f=Object(a.useState)(""),_=Object(r.a)(f,2),g=_[0],x=_[1];return Object(u.jsxs)("form",{onSubmit:j((function(){c(O,g)})),className:"log__in_wrapper",noValidate:!0,children:[Object(u.jsx)("h4",{className:"log__in_title",children:M[o].login.title}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"email",className:"log__in_input",placeholder:"Email"},d("Email",{required:!0})),{},{onChange:function(e){return m(e.target.value)},value:O||""})),Object(u.jsx)("p",{className:"log__in_error",children:null===(t=p.Email)||void 0===t?void 0:t.message}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"password",className:"log__in_input",placeholder:M[o].login.placeholder,value:g||""},d("password",{required:!0})),{},{onChange:function(e){return x(e.target.value)}})),Object(u.jsx)("p",{className:"log__in_error",children:null===(n=p.password)||void 0===n?void 0:n.message}),Object(u.jsx)("button",{type:"submit",className:"log__in_button",children:M[o].login.buttonText})]})},$=n(20),ee=function(e){var t,n,c=e.handleRegister,o=Object(s.c)(G).selectedLang,i=K.a().shape({Email:K.b().email("".concat("ru"===o?"\u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b @":"","\n            ").concat("fi"===o?"Sy\xf6t\xe4 kelvollinen s\xe4hk\xf6postiosoite. Esim. erkki@tunnus.fi":"")).required("".concat("ru"===o?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b":"","\n            ").concat("fi"===o?"Pakollinen kentt\xe4":"")),password:K.b().min(8,"".concat("ru"===o?"\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 8 \u0434\u043e 32 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"","\n            ").concat("fi"===o?"v\xe4hent\xe4\xe4n 8 merkki\xe4":"")).max(32,"".concat("ru"===o?"\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 8 \u0434\u043e 32 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"","\n            ").concat("fi"===o?"enint\xe4\xe4n 32 merkki\xe4":"")).required("".concat("ru"===o?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b":"","\n            ").concat("fi"===o?"Pakollinen kentt\xe4":""))}),l=Object(V.d)({resolver:Object(J.a)(i),mode:"onBlur"}),d=l.register,p=l.formState.errors,j=l.handleSubmit,b=Object(a.useState)(""),h=Object(r.a)(b,2),O=h[0],m=h[1],f=Object(a.useState)(""),_=Object(r.a)(f,2),g=_[0],x=_[1];return Object(u.jsxs)("form",{onSubmit:j((function(){c(O,g)})),className:"log__in_wrapper",noValidate:!0,children:[Object(u.jsx)("h4",{className:"log__in_title",children:M[o].register.title}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"email",className:"log__in_input",placeholder:"Email",value:O||""},d("Email",{required:!0})),{},{onChange:function(e){return m(e.target.value)}})),Object(u.jsx)("p",{className:"log__in_error",children:null===(t=p.Email)||void 0===t?void 0:t.message}),Object(u.jsx)("input",Object(B.a)(Object(B.a)({type:"password",className:"log__in_input",placeholder:M[o].register.placeholder,value:g||""},d("password",{required:!0})),{},{onChange:function(e){return x(e.target.value)}})),Object(u.jsx)("p",{className:"log__in_error",children:null===(n=p.password)||void 0===n?void 0:n.message}),Object(u.jsx)("button",{type:"submit",className:"log__in_button",children:M[o].register.buttonText}),Object(u.jsxs)("p",{className:"login__form_button-text",children:[M[o].register.text,Object(u.jsx)($.b,{to:"/sign-in",children:Object(u.jsxs)("button",{className:"login__form_button",children:[" ",M[o].register.textBtn]})})]})]})},te="https://auth.nomoreparties.co";function ne(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var ae=function(e){return Object(u.jsx)("div",{className:"popup  ".concat(e.isOpen&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__button-close"}),Object(u.jsxs)("div",{className:"success__popup_wrapper",children:[Object(u.jsx)("div",{className:e.className}),Object(u.jsx)("h2",{className:"success__popup_text",children:e.text})]})]})})},ce=function(e){var t=e.onClose,n=e.isOpen;return Object(u.jsx)(ae,{onClose:t,isOpen:n,text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",className:"success__popup_img"})},oe=function(e){var t=e.onClose,n=e.isOpen;return Object(u.jsx)(ae,{onClose:t,isOpen:n,text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437",className:"fail__popup_img"})},ie="SET_LANG",re={selectedLang:"ru"},se=function(e){var t=e.signOut,n=e.currentEmail,a=Object(s.b)(),c=Object(s.c)(G).selectedLang;function o(e){a(function(e){return{type:ie,payload:e}}(e))}return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("a",{href:"#",target:"_blank",className:"logo"}),Object(u.jsxs)("div",{className:"select__btn-wrapper",children:[Object(u.jsx)("button",{className:"select__btn-ru ".concat("ru"===c&&"select__btn-active"),onClick:function(){o("ru")},children:"ru"}),Object(u.jsx)("button",{className:"select__btn-fi ".concat("fi"===c&&"select__btn-active"),onClick:function(){return o("fi")},children:"fi"})]}),Object(u.jsxs)("div",{className:"header__wrapper",children:[n&&Object(u.jsx)("p",{className:"header__wrapper_email",children:n}),Object(u.jsxs)(Q.d,{children:[Object(u.jsx)(Q.b,{exact:!0,path:"/",children:Object(u.jsx)("button",{onClick:t,className:"header__wrapper_button",children:M[c].header.singOut})}),Object(u.jsx)(Q.b,{exact:!0,path:"/sign-up",children:Object(u.jsx)($.b,{to:"/sign-in",children:Object(u.jsx)("button",{className:"header__wrapper_button",children:M[c].header.singIn})})}),Object(u.jsx)(Q.b,{exact:!0,path:"/sign-in",children:Object(u.jsx)($.b,{to:"/sign-up",children:Object(u.jsx)("button",{className:"header__wrapper_button",children:M[c].header.singUp})})})]})]})]})},le=function(e){return{type:L,payload:e}},ue=function(e){return{type:x,payload:e}},de=function(e){return{type:m,payload:e}},pe=function(e){return{type:T,payload:e}},je=function(e){return{type:C,payload:e}},be=function(e){return{type:P,payload:e}},he=function(e){return{type:y,payload:e}},Oe=n(4),me=n(5),fe=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(Oe.a)(this,e),this.URL=void 0,this.token=void 0,this.URL=n,this.token=a.authorization}return Object(me.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this.URL,"cards"),{headers:{authorization:this.token}}).then(this._handleResponse)}},{key:"getUserInfoFromServer",value:function(){return fetch("".concat(this.URL,"users/me"),{headers:{authorization:this.token}}).then(this._handleResponse)}},{key:"setUserInfoFromServer",value:function(e){var t=e.userName,n=e.description;return fetch("".concat(this.URL,"users/me"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(this._handleResponse)}},{key:"addCardToServer",value:function(e){var t=e.title,n=e.link;return fetch("".concat(this.URL,"cards"),{method:"POST",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(this._handleResponse)}},{key:"deleteCardFromServer",value:function(e){return fetch("".concat(this.URL,"cards/").concat(e),{method:"DELETE",headers:{authorization:this.token,"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"changeLikeCardStatus",value:function(e,t){var n;return n=t?"PUT":"DELETE",fetch("".concat(this.URL,"cards/likes/").concat(e),{method:n,headers:{authorization:this.token,"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this.URL,"users/me/avatar"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then(this._handleResponse)}},{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"4e299d77-1777-4738-8eea-94761855c603","Content-Type":"application/json"}}),_e=function(){var e=Object(s.b)(),t=Object(s.c)(U).cards,n=Object(s.c)(l),c=n.user,o=n.currentEmail,i=Object(s.c)(z),d=i.selectedCard,p=i.cardToDelete,m=i.loggedIn,f=Object(s.c)(F),_=f.successPopupOpen,g=f.failPopupOpen,x=Object(Q.g)();function y(){e({type:v,payload:!1}),e(E(null))}return Object(a.useEffect)((function(){e(he(!0));var t=fe.getInitialCards(),n=fe.getUserInfoFromServer();Promise.all([t,n]).then((function(t){var n=Object(r.a)(t,2),a=n[0],c=n[1];e(function(e){return{type:j,payload:e}}(a)),e(de(c))})).catch((function(e){console.log(e)})).finally((function(){e(he(!1))}))}),[e]),Object(a.useEffect)((function(){if(localStorage.getItem("jwt")){var t=localStorage.getItem("jwt");(n=t,fetch("".concat(te,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return ne(e)})).then((function(e){return e}))).then((function(t){t&&(e(pe(t.data.email)),e(je(!0)),x.push("/"))}))}var n}),[x,e]),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("div",{className:"page",children:Object(u.jsxs)("div",{className:"page__wrapper",children:[Object(u.jsx)(ce,{onClose:y,isOpen:_}),Object(u.jsx)(oe,{onClose:y,isOpen:g}),Object(u.jsx)(I,{card:d,onClose:y}),Object(u.jsx)(W,{onUpdateUser:function(t){e(be(!0)),fe.setUserInfoFromServer(t).then((function(t){e(de(t)),y()})).catch((function(e){console.log(e)})).finally((function(){e(be(!1))}))},onClose:y}),Object(u.jsx)(Y,{onUpdateAvatar:function(t){e(be(!0)),fe.changeAvatar(t).then((function(t){e(de(t)),y()})).catch((function(e){console.log(e)})).finally((function(){e(be(!1))}))},onClose:y}),Object(u.jsx)(H,{onClose:y,onAddPlace:function(t){e(be(!0)),fe.addCardToServer(t).then((function(t){e({type:b,payload:t}),y()})).catch((function(e){console.log(e)})).finally((function(){e(be(!1))}))}}),Object(u.jsx)(X,{onClose:y,onSubmit:function(n){e(be(!0)),fe.deleteCardFromServer(n._id).then((function(a){if("\u041f\u043e\u0441\u0442 \u0443\u0434\u0430\u043b\u0451\u043d"===a.message){var c=t.filter((function(e){return e!==n}));e(function(e){return{type:h,payload:e}}(c)),e(ue(!1))}})).catch((function(e){console.log(e)})).finally((function(){e(be(!1))}))},cardToDelete:p}),Object(u.jsx)(se,{currentEmail:o,signOut:function(){localStorage.removeItem("jwt"),x.push("/sign-in"),e(je(!1)),e(pe(""))}}),Object(u.jsxs)(Q.d,{children:[Object(u.jsx)(Q.b,{exact:!0,path:"/",children:m?Object(u.jsx)(A,{onCardLike:function(n){var a=n.likes.some((function(e){return e._id===c._id}));fe.changeLikeCardStatus(n._id,!a).then((function(a){var c=t.map((function(e){return e._id===n._id?a:e}));e(function(e){return{type:O,payload:e}}(c))})).catch((function(e){console.log(e)}))},onCardDelete:function(t){e(ue(!0)),e({type:N,payload:t})}}):Object(u.jsx)(Q.a,{to:"/sign-in"})}),Object(u.jsx)(Q.b,{path:"/sign-in",children:Object(u.jsx)(Z,{handleAuthorize:function(t,n){(function(e,t){return fetch("".concat(te,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return ne(e)})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e}))})(t,n).then((function(n){n.token&&(e(je(!0)),e(pe(t)),x.push("/"))})).catch((function(t){e(le(!0)),console.log(t)}))}})}),Object(u.jsx)(Q.b,{path:"/sign-up",children:Object(u.jsx)(ee,{handleRegister:function(t,n){(function(e,t){return fetch("".concat(te,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return ne(e)})).then((function(e){return e}))})(t,n).then((function(t){e({type:S,payload:!0}),x.push("/sign-in")})).catch((function(t){console.log(t),e(le(!0))}))}})}),Object(u.jsx)(Q.b,{path:"/",children:m?Object(u.jsx)(Q.a,{to:"/"}):Object(u.jsx)(Q.a,{to:"/sign-in"})})]}),Object(u.jsx)(D,{})]})})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,193)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))},xe=n(28),ve=n(82),ye=n(7),ke={cards:[],isLoading:!1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(B.a)(Object(B.a)({},e),{},{cards:t.payload});case b:return Object(B.a)(Object(B.a)({},e),{},{cards:[t.payload].concat(Object(ye.a)(e.cards))});case h:case O:return Object(B.a)(Object(B.a)({},e),{},{cards:t.payload});case y:return Object(B.a)(Object(B.a)({},e),{},{isLoading:t.payload});default:return e}},Pe={user:{about:"",avatar:"",cohort:"",name:"",_id:""},currentEmail:""},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(B.a)(Object(B.a)({},e),{},{user:t.payload});case T:return Object(B.a)(Object(B.a)({},e),{},{currentEmail:t.payload});default:return e}},Te={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,isPopupWithSubmitOpen:!1,successPopupOpen:!1,failPopupOpen:!1},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(B.a)(Object(B.a)({},e),{},{isEditProfilePopupOpen:t.payload});case _:return Object(B.a)(Object(B.a)({},e),{},{isAddPlacePopupOpen:t.payload});case g:return Object(B.a)(Object(B.a)({},e),{},{isEditAvatarPopupOpen:t.payload});case x:return Object(B.a)(Object(B.a)({},e),{},{isPopupWithSubmitOpen:t.payload});case S:return Object(B.a)(Object(B.a)({},e),{},{successPopupOpen:t.payload});case L:return Object(B.a)(Object(B.a)({},e),{},{failPopupOpen:t.payload});case v:return Object(B.a)(Object(B.a)({},e),{},{isPopupWithSubmitOpen:t.payload,isEditAvatarPopupOpen:t.payload,isAddPlacePopupOpen:t.payload,isEditProfilePopupOpen:t.payload,successPopupOpen:t.payload,failPopupOpen:t.payload});default:return e}},Le={selectedCard:null,cardToDelete:null,loadingBtn:!1,loggedIn:!1},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(B.a)(Object(B.a)({},e),{},{selectedCard:t.payload});case N:return Object(B.a)(Object(B.a)({},e),{},{cardToDelete:t.payload});case P:return Object(B.a)(Object(B.a)({},e),{},{loadingBtn:t.payload});case C:return Object(B.a)(Object(B.a)({},e),{},{loggedIn:t.payload});default:return e}},Ue=Object(xe.b)({initialCards:Ne,currentUser:Ce,popups:Se,cardSettings:Ee,langReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(B.a)(Object(B.a)({},e),{},{selectedLang:t.payload});default:return e}}}),Ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.c,Re=Object(xe.d)(Ue,Ae(Object(xe.a)(ve.a)));i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)($.a,{basename:"/kuvasto",children:Object(u.jsx)(s.a,{store:Re,children:Object(u.jsx)($.a,{children:Object(u.jsx)(_e,{})})})})}),document.getElementById("root")),ge()},87:function(e,t,n){}},[[192,1,2]]]);
//# sourceMappingURL=main.b94584d6.chunk.js.map